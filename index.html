<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

    <title>Micronaut Framework</title>

    <link rel="stylesheet" href="css/reset.css">
    <link rel="stylesheet" href="css/reveal.css">
    <link rel="stylesheet" href="css/theme/solarized.css">

    <!-- Theme used for syntax highlighting of code -->
    <link rel="stylesheet" href="lib/css/monokai.css">

    <!-- Printing and PDF exports -->
    <script>
        var link = document.createElement('link');
        link.rel = 'stylesheet';
        link.type = 'text/css';
        link.href = window.location.search.match(/print-pdf/gi) ? 'css/print/pdf.css' : 'css/print/paper.css';
        document.getElementsByTagName('head')[0].appendChild(link);
    </script>
    <script>
        var link = document.createElement( 'link' );
        link.rel = 'stylesheet';
        link.type = 'text/css';
        link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
        document.getElementsByTagName( 'head' )[0].appendChild( link );
    </script>
</head>
<body>
<div class="reveal">
    <div class="slides">
        <section>
            <h1>Micronaut Framework</h1>
            <h3>Compilation limits</h3>
            <p>
                <small>Presentation by <a href="http://hakim.se">Ryszard Perkowski</a></small>
            </p>
        </section>
        <section>
            <h1>About me</h1>
            <img width="30%" class="plain" data-src="images/logo.png" alt="Logo">
            <h3>Using Spring since 2006</h3>
            <h3></h3>
        </section>
        <section>
            <h1>Agenda</h1>
            <ul>
                <li>Problem</li>
                <li>Solution</li>
                <li>API Overview</li>
                <li>Benchmarks and other lies</li>
                <li>QA</li>
            </ul>
        </section>
        <section>
            <img data-src="images/whats-the-problem.png" alt="WhatsTheProblem">
            <small>Oracle Code One 2018</small>
        </section>
        <section>
            <h1>Why? </h1>
            <h3>a lot happens in runtime</h3>
            <ul>
                <li>Read the byte code of every bean it finds</li>
                <li>Synthesize new annotations</li>
                <li>Build Reflective Metadata</li>
            </ul>
            <aside class="notes">
                — Reads the byte code of every bean it finds
                — Synthesizes new annotations for each annotation on
                each bean method, constructor, field etc. to support
                Annotation metadata
                — Builds Reflective Metadata for each bean for every
                method, constructor, field etc.
                time and space
            </aside>
        </section>

        <section>
            <h2>Other problems</h2>
            <ul>
                <li>Type erasure</li>
                <li>Slow reflection</li>
                <li>Reflective data caches</li>
                <li>Classpath scanning</li>
                <li>Dynamic class loading</li>
            </ul>

            <aside class="notes">

            </aside>
        </section>
        <section>
            <h2>Let me demon-strate </h2>
            <ul>
                <li>Spring Boot petclinic</li>
            </ul>
            <img data-src="images/wet-cat.jpg" alt="wet-cat">
            <aside class="notes">
            </aside>
        </section>
        <section>
            <h3>On top of it</h3>
            <img width="46%" data-src="images/headache-tenx.tech.jpeg" alt="docker">
            <small>https://blog.tenx.tech/the-nix-fix-f4844773d281</small>
            <aside class="notes">
            </aside>
        </section>
        <section>
            <h2>AWS</h2>
            <ul>
                <li>IO</li>
                <li>CPU</li>
                <li>Network</li>
            </ul>
            <img style="float: right" width="40%" data-src="images/speed.jpg" alt="speed">
            <aside class="notes">
            </aside>
        </section>
        <section>
            <h2>Cloud cost</h2>
            <img data-src="images/aws-cost.jpg" alt="docker">
            <small>https://en.wikipedia.org/wiki/Amazon_Elastic_Compute_Cloud</small>
            <aside class="notes">
            </aside>
        </section>
        <section>
            <section>
                <h1>What can you do?</h1>
            </section>
            <section>
                <h2>buy a bigger mac</h2>
                <img data-src="images/macbook.png" alt="frameworks">
            </section>
            <section>
                don't worry, pay more
            </section>
            <section>
                <h2>buy Amazon shares</h2>
                <img data-src="images/amazon-shares.png" alt="frameworks">
            </section>
            <section>do less</section>
        </section>
        <section>
            <img width="80%" data-src="images/frameworks.png" alt="frameworks">
            <small>Oracle Code One 2018</small>
        </section>
        <section>
            <h1>Solution - potential</h1>
            <ul>
                <li>Ahead of time compilation</li>
                <li>Google Dagger 2.x</li>
            </ul>
            <aside class="notes">
                — Google Dagger 2.x
                — Compile Time Dependency Injector
                — Reflection Free
                — Limited in Scope to just DI
            </aside>
        </section>
        <section>
            <h1>Java server world</h1>
        </section>
        <section>
            <img width="70%" data-src="images/micronaut-logo.png" alt="status">

        </section>
        <section>
            <h1>Goal</h1>
            <ul>
                <li>Create a New Framework designed from the groundup for Microservices and Serverless Computing</li>
                <li>Blazing fast startup time</li>
                <li>Low Memory Footprint</li>
                <li>As Small As Possible JAR Sizes</li>
                <li>Zero Dependency</li>
                <li>12 Factor - https://12factor.net</li>
            </ul>
            <aside class="notes">
                Resilliant apps, with retries, cirtuit breakers, fast startup, shutdown
            </aside>
        </section>
        <section>
            <h1>How</h1>
            <ul>
                <li>DI during compilation</li>
                <li>Reactive - based on Netty</li>
                <li>AOP, proxies all processed during compilation</li>
            </ul>
            <aside class="notes">
            </aside>
        </section>
        <section>
            <h3>How small</h3>
            <img data-src="images/small.png" alt="small">
            <small>Oracle Code One 2018</small>
            <aside class="notes">
            </aside>
        </section>
        <section>
            <h1>API</h1>
            <ul>
                <li>Demo</li>
            </ul>
            <aside class="notes">
                <pre><code>
                mn create-app hangar
                file-watch
                micronaut:
                    router:
                        versioning:
                            enabled: true
                    </code></pre>
            </aside>
        </section>
        <section>
            <h1>API Functions</h1>
            <ul>
                <li>AWS Lambda</li>
            </ul>

        </section>

        <section>
            <h1>Other benefits</h1>
            <ul>
                <li>Better tooling integration (Jackson)</li>
                <li>Auto Documentation</li>
                <li>GraalVM</li>
            </ul>
            <aside class="notes">
                <a href="https://github.com/FasterXML/jackson-docs/wiki/Presentation:-Jackson-Performance" target="_blank">Jackson Performance</a>
                <pre><code>
                annotationProcessor "io.micronaut.configuration:micronaut-openapi"
                compile "io.swagger.core.v3:swagger-annotations"

                @OpenAPIDefinition(
                info = @Info(
                title = "Hello World",
                version = "0.0",
                description = "My API",
                license = @License(name = "Apache 2.0", url = "http://foo.bar"),
                contact = @Contact(url = "http://gigantic-server.com", name = "Fred", email = "Fred@gigagantic-server.com")
                )
                )
                public class Application {
                </code></pre>
            </aside>
        </section>
        <section>
            <h1>GraalVM</h1>
            <ul></ul>
            <aside class="notes">
                Twitter 11% less CPU
                GraalVM is a universal VM mainly for Java and JVM supported languages
            </aside>
        </section>
        <section>
            <h3>GraalVM Native image</h3>
            <p>20ms startup with 18MB consumption</p>

            <img width="50%" data-src="images/graalvm-optimization.png" alt="graalv-opt">
<small>https://medium.com/graalvm/lightweight-cloud-native-java-applications-35d56bc45673</small>
            <aside class="notes">

            </aside>
        </section>
        <section>
            <h2>GraalVM requirements</h2>
            <ul>plan ahead</ul>
            <aside class="notes">
                Spring Jersey hk2, dynamic, CGLIB, rabbitmq
            </aside>
        </section>
        <section>
            <h1>Benchmarks</h1>
            <a href="https://piotrminkowski.wordpress.com/2019/04/09/performance-comparison-between-spring-boot-and-micronaut/" target="_blank">Benchmark</a>
        </section>
        <section>
            <h1>Our results</h1>
            <ul>
                <li>Project size - medium - ~ 300 classes with logic</li>
                <li>Jar size - 150MB -> 42MB</li>
                <li>Startup - 8s - 2s </li>
            </ul>
        </section>
        <section>
            <h1>Our issues</h1>
            <ul>
                <li>HTTP status 499 </li>
            </ul>
        </section>
        <section>
            <h1>Our issues</h1>
            <ul>
                <img data-src="images/httpstatus-499.png" alt="graalv-opt">
            </ul>
        </section>
        <section>
            <h1>Competition</h1>
            <ul>
                <li>Quarkus</li>
                <li>Helidon</li>
            </ul>
            <aside class="notes">
                <p>both follow the same native narrative</p>
                <p>both support JAX-RS API </p>
            </aside>
        </section>
        <section>
            <img data-src="images/status.png" alt="status">
        </section>
        <section>
            <h2>Future looks bright</h2>
            <img width="40%" data-src="images/buzz.jpg" alt="graalv-opt">
<ul>
            <li>ORM</li>
            <li>reflection-free validation-api</li>
            <li>OAuth2<li/>
            <li>JMS</li>
</ul>
            <aside class="notes">
                hibernate validation 3MB (reflective
            </aside>
        </section>
        <section>
            <h1>Summary</h1>
            <ul>
                <li>Micronaut is small and fast</li>
                <li>has many Spring features</li>
                <li>allows for a lot of new features</li>
            </ul>
            <aside class="notes">
                small: modular, small output jars, low runtime memory
                spring features: configuration, DI, etc
                features: Swagger, optimizations
            </aside>
        </section>
        <section>
            <h1>Q & A</h1>
        </section>
    </div>
</div>

<script src="js/reveal.js"></script>

<script>
    // More info about config & dependencies:
    // - https://github.com/hakimel/reveal.js#configuration
    // - https://github.com/hakimel/reveal.js#dependencies
    Reveal.initialize({
        dependencies: [
            {src: 'plugin/markdown/marked.js'},
            {src: 'plugin/markdown/markdown.js'},
            {src: 'plugin/notes/notes.js', async: true},
            {src: 'plugin/notes-server/client.js', async: true},

            {src: 'plugin/highlight/highlight.js', async: true}
        ]
    });
</script>
</body>
</html>
